<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>


<div id="id01"></div>
<div id="id02"></div>
<div id="id03"></div>
<div id="id04"></div>
<div id="id05"></div>
<div id="id06"></div>
<div id="id07"></div>
<div id="id08"></div>


<script>
    //  AJAX  AJAX  AJAX  AJAX  AJAX  AJAX  AJAX
    var xmlhttp = new XMLHttpRequest();           //  AJAX CALL to 'myTutorials.txt' for displayArray() Function Below
    var url = "myTutorials.txt";                  //  <<  GET COLLECTION with AJAX!!


    xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            var myArr = JSON.parse(xmlhttp.responseText);       //  JSON.parse(1)  1.  xmlhttp.responseText
            displayArray(myArr);                                //  <<  Invoke the Display Function, PASS ARRAY
        }
    };
    xmlhttp.open("GET", url, true);
    xmlhttp.send();                             //  AJAX part COMPLETE
    //  AJAX  AJAX  AJAX  AJAX  AJAX  AJAX  AJAX  - END

    function displayArray(arr) {                //  Display Results  <<  ARRAY (from AJAX) PASSED TO THIS FUNCTION
        console.log(arr);

        var text = "";
        var i;
        for(i = 0; i < arr.length; i++) {       //  LOOP through ARRAY of OBJECTS

            var currentObject = arr[i];         //  Iterate over [array] of {objects}

            text += '<a href="' + currentObject.url + '">' +
                    currentObject.display + '</a><br>';

        }
        document.getElementById("id01").innerHTML = (text + "<br>");

    }

    //  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    //  THIS FUNCTION ACCESS the JSON via the <script> tag REFERENCE APPROACH -- <script> tag BELOW:

    function myFunction(arr) {         // <<  ACCESS JSON.JS  myFunction(mookArray) is CALLED IN THE JS FILE
        var text = "";
        var i;
        for(i = 0; i < arr.length; i++) {
            text += '<a href="' + arr[i].url + '">' +
                    arr[i].display + '</a><br>';
        }
        document.getElementById("id02").innerHTML = (text + "<br>");
    }

    //  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    //  AJAX JSON OBJECT from TREEHOUSE.COM:     AJAX TREEHOUSE    AJAX TREEHOUSE    AJAX TREEHOUSE

function getUser(username){

        //  AJAX  AJAX  AJAX  AJAX  AJAX  AJAX  AJAX
        var xmlhttp = new XMLHttpRequest();                               //  Create:  XMLHttpRequest OBJECT
        var url = "https://teamtreehouse.com/" + username + ".json";      //  <<  GET COLLECTION with AJAX!!

        xmlhttp.onreadystatechange = function() {               //  EVENT:  onreadystatechange
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
        var myObject = JSON.parse(xmlhttp.responseText);       //  JSON.parse(1)  1.  xmlhttp.responseText
        displayArray(myObject);                                //  <<  Invoke the Display Function, PASS ARRAY
            }
        };

        xmlhttp.open("GET", url, true);
        xmlhttp.send();                             //  AJAX part COMPLETE

        //  readyState    Holds the status of the XMLHttpRequest. Changes from 0 to 4:
        //  0: request not initialized
        //  1: server connection established
        //  2: request received
        //  3: processing request
        //  4: request finished and response is ready

        //  status
        //  200:  "OK"
        //  404:  "Page not found"

        //  AJAX  AJAX  AJAX  AJAX  AJAX  AJAX  AJAX  - END


        //  Display Results  <<  ARRAY (from AJAX) PASSED TO THIS FUNCTION
        function displayArray(myObject) {
        console.log(myObject);

            var message = "<ul>";
            for (var x in myObject){        //  LOOP through returned OBJECT
                message += "<li> Key: " + x + " | Value: " + myObject[x] + "</li>"
            }
            message += "</ul>";

        document.getElementById("id03").innerHTML = message;
        }
    }
    getUser("danielniclas");

</script>

<script src="myTutorials.js"></script>

</body>
</html>